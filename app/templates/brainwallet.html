<div ng-controller="LocaleSelectorController" class="locale-selector pull-right">
<div class="btn-group" dropdown is-open="status.isopen">
<button type="button" class="btn dropdown-toggle" dropdown-toggle ng-disabled="disabled">
<span class="f32"><span class="flag {{flag}}"></span></span> <span class="caret"></span>
</button>
<ul class="dropdown-menu" role="menu">
<!--http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2-->
<li><a ng-click="setFlag('cn')"> <span class="f32"><span class="flag cn"></span></span> </a></li>
<li><a ng-click="setFlag('us')"> <span class="f32"><span class="flag us"></span></span> </a></li>
<li><a ng-click="setFlag('de')"> <span class="f32"><span class="flag de"></span></span> </a></li>
<li><a ng-click="setFlag('ru')"> <span class="f32"><span class="flag ru"></span></span> </a></li>
<li><a ng-click="setFlag('it')"> <span class="f32"><span class="flag it"></span></span> </a></li>
<li><a ng-click="setFlag('kr')"> <span class="f32"><span class="flag kr"></span></span> </a></li>
</ul>
</div>
</div>

<table style="width: 100%; height: 100%;">
<tr><td class="splashpage-wrapper">
<section id="brainwallet">
<!--<div class="row"><div class="col-sm-12">row,col-->

    <div class="str-top">
        <img src="img/xts-logo-xl-white-shadow.png" />
        <h4 translate>unlock.desc_title</h4>
    </div>
    <div ng-if="step === 'introduction' || step === 'guest'">
        <h4 translate>brain_wallet.access_your_wallet</h4>
    </div>
    <div ng-hide="has_secure_random" ng-cloak>
        <div class="row spacedrow">
            <div class="description">
                <p class="text-danger" translate>brain_wallet.no_secure_random</p>
            </div>
        </div>
    </div>
    
    <form name="wform" class="form-inline" 
        ng-submit="submitForm(wform.$valid)" 
        role="form" novalidate
    >
        <div class="str-bottom" ng-switch="step" 
            ng-show="has_secure_random">
            
            <div class="row" ng-if="step === 'introduction' || step === 'guest'">
                <div class="row spacedrow">
                    
                    <div class="form-group">
                        <button class="btn btn-primary" type="submit"
                            ng-click="stepChange('open')"
                            ng-show="has_wallet"
                            translate>brain_wallet.open
                        </button>
                        <button class="btn btn-primary" type="submit"
                            ng-click="stepChange('create_brainkey')"
                            translate>brain_wallet.create
                        </button>
                        <button class="btn btn-primary" type="submit"
                            ng-click="stepChange('recover_brainkey')"
                            translate>brain_wallet.recover
                        </button>
                        <button class="btn btn-primary" type="submit"
                            ng-click="stepChange('guest')"
                            translate>brain_wallet.guest
                        </button>
                        <i ng-class="creating_wallet"></i>
                    </div>
                </div>
            </div>
            
            <div class="row" ng-switch-when="open">
                <div class="description">
                    <h4 translate>brain_wallet.open_wallet_header</h4>
                </div>
                <div class="row spacedrow">
                    <div class="description">
                        <p class="text-muted">
                            <span translate>brain_wallet.enter_password</span>
                        </p>
                    </div>
                </div>
                <div class="form-group" ng-class="{
                    'has-error' : wform.sp.$invalid && !wform.sp.$pristine
                }">
                    <input ng-trim="false"
                        ng-model="data.spending_password"
                        name="sp" type="password" autofocus
                        class="form-control password" id="spending_password"
                        placeholder="{{'brain_wallet.password'|translate}}" 
                        required ng-minlength="9" ng-maxlength="255"
                    />

                </div>
                <div class="row spacedrow">
                    <div class="form-group">
                        <button ng-disabled="loading_indicator.show || wform.$invalid" 
                            class="btn btn-primary" type="submit" translate>
                            brain_wallet.open
                        </button>
                        <button class="btn btn-primary"
                            ng-click="stepChange('introduction')" translate>
                            brain_wallet.back
                        </button>
                    </div>
                </div>
                <div class="row">
                    <br>
                    <div ng-show="wform.sp.$error.minlength" 
                        class="text-danger small" translate>
                        wallet_common.pw_too_short
                    </div>
                    <div ng-show="wform.sp.$error.maxlength" 
                        class="text-danger small" translate>
                        wallet_common.pw_too_long
                    </div>
                    <div ng-show="wform.sp.$error.wrong_password" 
                        class="text-danger small" translate>
                        wallet_common.wrong_password
                    </div>
                    <div ng-show="wform.sp.$invalid && !wform.sp.$pristine"
                        class="text-danger small" translate>
                        wallet_common.pw_required
                    </div>
                </div>
            </div>
            
            <div class="row" ng-switch-when="create_brainkey">
                <div class="description">
                    <h4 translate>brain_wallet.new_brainkey_header</h4>
                </div>
                <div class="row spacedrow">
                    <div class="description">
                        <p class="text-muted" translate>
                            brain_wallet.mouse_entropy_info
                        </p>
                        <progressbar
                            max="1000" value="entropy_collection_progressbar" 
                            animate="false" class="progress-striped active"
                            type="info" style="margin: 0px 10px 0px 10px"
                        >
                        </progressbar>
                        <span style="color: lightgreen">
                            <small>{{entropy || '...'}}</small>
                        </span>
                    </div>
                </div>
                <br/>
                <button tabindex="3" class="btn btn-primary" 
                    ng-click="stepChange('introduction')"
                    translate>brain_wallet.cancel
                </button>
            </div>
            
            <div class="row" ng-switch-when="recover_brainkey">
                <div class="description">
                    <h4 translate>brain_wallet.recover_header</h4>
                </div>
                <div class="row">
                    <div class="description">
                        <span class="text-muted" translate>
                            brain_wallet.recover_info
                        </span>
                    </div>
                </div>
                <div class="row spacedrow">
                    <div class="form-group" ng-class="{
                        'has-error' : wform.bk.$invalid && !wform.bk.$pristine
                    }">
                        <textarea id="brainkey" class="form-control"
                            ng-trim="true" ng-model="data.brainkey" name="bk"
                            placeholder="{{'brain_wallet.brainkey'|translate}}" 
                            required ng-minlength="31" ng-maxlength="1000"
                            autofocus
                        />
                    </div>
                </div>
                <div class="row spacedrow">
                    <div class="form-group row">
                        <i ng-class="creating_wallet"></i>
                        <button ng-disabled="loading_indicator.show || wform.bk.$invalid" 
                            tabindex="2" class="btn btn-primary" type="submit"
                            translate>
                            brain_wallet.open
                        </button>
                        <button ng-disabled="loading_indicator.show" 
                            tabindex="2" class="btn btn-primary"
                            ng-click="stepChange('introduction')"
                            translate>
                            brain_wallet.back
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div ng-show="wform.bk.$error.minlength && wform.bk.$submitted" 
                        class="text-danger small" translate>
                        brain_wallet.too_short
                    </div>
                    <div ng-show="wform.bk.$error.maxlength" 
                        class="text-danger small" translate>
                        brain_wallet.too_long
                    </div>
                </div>
                <br/>
                <div class="row">
                    <div class="description">
                        <b><span class="text-muted" translate>
                            brain_wallet.brainkey_warning
                        </span></b>
                        <span class="text-muted" translate>
                            brain_wallet.brainkey_warning_creator
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="row" ng-switch-when="review_brainkey">
                <div class="description">
                    <h4 translate>brain_wallet.brainkey_header</h4>
                </div>
                <div class="row spacedrow">
                    <div class="description">
                        <p class="text-muted" translate>brain_wallet.brainkey_info</p>
                    </div>
                </div>
                <div class="row spacedrow">
                    <p style="color: lightgreen">
                        <span>{{data.brainkey || '...'}}</span>
                    </p>
                </div>
                <div class="row">
                    <div class="description">
                        <b><span class="text-muted" translate>
                            brain_wallet.brainkey_warning
                        </span></b>
                        <span class="text-muted" translate>
                            brain_wallet.brainkey_warning_recover
                        </span>
                        <span class="text-muted" translate>
                            brain_wallet.brainkey_warning_attack
                        </span>
                    </div>
                </div>
                <br/>
                <button ng-disabled="loading_indicator.show" tabindex="1" 
                    class="btn btn-primary"
                    ng-click="stepChange('create_wallet')"
                    translate>brain_wallet.ok
                </button>
                <button tabindex="3" class="btn btn-primary" 
                    ng-click="stepChange('introduction')"
                    translate>brain_wallet.cancel
                </button>
            </div>

            <div class="row" ng-switch-when="create_wallet">
                <div class="description">
                    <h4 translate>brain_wallet.brainkey_header</h4>
                </div>
                <div class="row spacedrow">
                    <p style="color: lightgreen">
                        <span>{{data.brainkey || '...'}}</span>
                    </p>
                </div>
                <div class="row spacedrow">
                    <div class="description">
                        <p class="text-muted" translate>brain_wallet.enter_password_info</p>
                    </div>
                </div>
                <div class="row spacedrow">
                    <div class="form-group" ng-class="{ 'has-error' : wform.csp.$invalid && !wform.csp.$pristine }">
                        <input tabindex="1" ng-trim="false"
                            ng-model="data.spending_password"
                            name="sp" type="password" style="width:200px;"
                            class="form-control"  id="spending_password"
                            placeholder="{{'brain_wallet.password'|translate}}"
                            required ng-minlength="9" ng-maxlength="255"
                            autofocus />
                        
                        <div class="row spacedrow">
                            <input tabindex="1" ng-trim="false"
                                ng-model="data.confirm_spending_password" 
                                name="csp" type="password" style="width:200px;" 
                                class="form-control" id="confirm_spending_password"
                                placeholder="{{'brain_wallet.confirm_password'|translate}}" required
                                pw-check="spending_password" />
                        </div>
                    </div>
                </div>
                <div class="row spacedrow">
                    <div class="form-group row">
                        <i ng-class="creating_wallet"></i>
                        <button
                            ng-disabled="loading_indicator.show || wform.csp.$invalid" 
                            tabindex="2" class="btn btn-primary" type="submit"
                            translate>brain_wallet.create
                        </button>
                        <button tabindex="3" class="btn btn-primary"
                            ng-click="stepChange('review_brainkey')" translate>
                            brain_wallet.back
                        </button>
                    </div>
                </div>
                <br/>
                <div class="row">
                    <div ng-show="wform.csp.$error.pwmatch"
                        class="text-danger small" translate>
                        wallet_common.pw_not_match
                    </div>
                    <div ng-show="wform.csp.$error.password_taken" 
                        class="text-danger small" translate>
                        brain_wallet.password_taken
                    </div>
                    <div ng-show="wform.sp.$error.minlength" 
                        class="text-danger small" translate>
                        wallet_common.pw_too_short
                    </div>
                    <div ng-show="wform.sp.$error.maxlength" 
                        class="text-danger small" translate>
                        wallet_common.pw_too_long
                    </div>
                </div>
            </div>
            
            <div class="row">
                <br/>
                <p class="text-muted"><small translate>unlock.risks_warning</small></p>
            </div>
        </div>
    </form>
</section>

</td> </tr>
</table>
